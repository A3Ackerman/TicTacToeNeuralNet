{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from'react';/* React code below based on https://reactjs.org/tutorial/tutorial.html */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dec=4;var train_data=require('./train_data.json');var test_data=require('./test_data.json');function Intro(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the Tic Tac Toe Neural Net!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The networks consists of a single fully connected layer with a sigmoid activation function and cross-entropy loss function\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The goal of this project is to train a simple neural net to classify complete games of Tic Tac Toe as \\\"X-Wins\\\", \\\"O-Wins\\\", or \\\"Draw\\\".\"}),/*#__PURE__*/_jsx(\"p\",{children:\"To expand the problem space beyond the finite number of possible 3x3 Tic Tac Toe boards, Xs and Os are represented by random values in the range (0, 0.5) and (0.5, 1) respectively.\"})]});}function Square(_ref){var i=_ref.i,_onClick=_ref.onClick;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),dis=_useState2[0],setDis=_useState2[1];return/*#__PURE__*/_jsx(\"button\",{className:\"square\",disabled:dis,onClick:function onClick(){_onClick();setDis(true);},style:i==null?{background:\"#fff\"}:i>0.5?{background:\"#e4b5b5\"}:{background:\"#99b1f4\"},children:i?i.toFixed(dec):i});}function Board(){var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),xNext=_useState4[0],setXNext=_useState4[1];var _useState5=useState(Array(9).fill(null)),_useState6=_slicedToArray(_useState5,2),squares=_useState6[0],setSquares=_useState6[1];function handleClick(i){var sq=squares;sq[i]=xNext?Math.random()/2:0.5+Math.random()/2;setSquares(sq);setXNext(!xNext);}return/*#__PURE__*/_jsxs(\"div\",{className:\"game-board\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:xNext?\"Next player: X\":\"Next player: O\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[0],onClick:function onClick(){return handleClick(0);}}),/*#__PURE__*/_jsx(Square,{i:squares[1],onClick:function onClick(){return handleClick(1);}}),/*#__PURE__*/_jsx(Square,{i:squares[2],onClick:function onClick(){return handleClick(2);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[3],onClick:function onClick(){return handleClick(3);}}),/*#__PURE__*/_jsx(Square,{i:squares[4],onClick:function onClick(){return handleClick(4);}}),/*#__PURE__*/_jsx(Square,{i:squares[5],onClick:function onClick(){return handleClick(5);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[6],onClick:function onClick(){return handleClick(6);}}),/*#__PURE__*/_jsx(Square,{i:squares[7],onClick:function onClick(){return handleClick(7);}}),/*#__PURE__*/_jsx(Square,{i:squares[8],onClick:function onClick(){return handleClick(8);}})]})]});}function Game(){return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsx(Board,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-info\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"ol\",{})]})]});}function TrainingSquare(i){return/*#__PURE__*/_jsx(\"button\",{className:\"training-square\",style:i>0.5?{background:\"#e4b5b5\"}:{background:\"#99b1f4\"},children:i.toFixed(dec)});}function TrainingBoard(board){return/*#__PURE__*/_jsxs(\"div\",{className:\"training-board\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[TrainingSquare(board[0]),TrainingSquare(board[1]),TrainingSquare(board[2])]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[TrainingSquare(board[3]),TrainingSquare(board[4]),TrainingSquare(board[5])]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[TrainingSquare(board[6]),TrainingSquare(board[7]),TrainingSquare(board[8])]})]});}function ShowTrainingBoards(_ref2){var title=_ref2.title,boards=_ref2.boards;return/*#__PURE__*/_jsxs(\"table\",{className:\"training-boards\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"h3\",{children:title})})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{id:\"board\",children:\"Input Board\"}),/*#__PURE__*/_jsx(\"th\",{id:\"label\",children:\"True Class\"}),/*#__PURE__*/_jsx(\"th\",{id:\"pred\",children:\"Predicted Class\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:boards.map(function(x,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{headers:\"board\",children:TrainingBoard(x.game)}),/*#__PURE__*/_jsx(\"td\",{headers:\"label\",children:x.class}),/*#__PURE__*/_jsx(\"td\",{headers:\"pred\",children:\"None\"})]},i);})})]});}function Table(_ref3){var weights=_ref3.weights,bias=_ref3.bias;var dec=4;var dataRows=[];weights.forEach(function(row,i){var cells=[];row.forEach(function(val,j){cells.push(/*#__PURE__*/_jsx(\"td\",{headers:\"weights\",children:val.toFixed(dec)},i.toString().concat(j.toString())));});dataRows.push(cells);});var b0=bias[0]==null?\"\":parseFloat(bias[0]).toFixed(dec);var b1=bias[1]==null?\"\":parseFloat(bias[1]).toFixed(dec);var b2=bias[2]==null?\"\":parseFloat(bias[2]).toFixed(dec);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"params-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{id:\"bias\"}),/*#__PURE__*/_jsx(\"th\",{id:\"bias\",children:\"Bias\"}),/*#__PURE__*/_jsx(\"th\",{id:\"weights\",children:\"Weights\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class X Wins\"},\"0h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b0},\"0b\"),dataRows[0]]},\"0r\"),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class Y Wins\"},\"1h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b1},'1b'),dataRows[1]]},\"1r\"),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class Draw\"},\"2h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b2},'2b'),dataRows[2]]},\"2r\")]})]})});}function loadNeuralNetScripts(){return _loadNeuralNetScripts.apply(this,arguments);}function _loadNeuralNetScripts(){_loadNeuralNetScripts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,mlcode;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('./NeuralNet.py');case 2:response=_context.sent;_context.next=5;return response.text();case 5:mlcode=_context.sent;window.pyodide.runPythonAsync(mlcode);case 7:case\"end\":return _context.stop();}}},_callee);}));return _loadNeuralNetScripts.apply(this,arguments);}function delay(_x){return _delay.apply(this,arguments);}function _delay(){_delay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ms){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return new Promise(function(resolve){return setTimeout(function(){return resolve();},ms);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _delay.apply(this,arguments);}function App(){var _useState7=useState('Initializing Python 3.8\\n'),_useState8=_slicedToArray(_useState7,2),console=_useState8[0],setConsole=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),pythonLoaded=_useState10[0],setPythonLoaded=_useState10[1];var _useState11=useState([[],[],[]]),_useState12=_slicedToArray(_useState11,2),weights=_useState12[0],setWeights=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),bias=_useState14[0],setBias=_useState14[1];//Initialize Python\nuseEffect(function(){if(!pythonLoaded){window.languagePluginLoader.then(function(){setPythonLoaded(true);setConsole(function(c){return c+'Python Loaded\\n';});//load NeuralNet.py Scripts\nloadNeuralNetScripts().then(function(){setConsole(function(c){return c+'Neural Net Scripts Loaded\\n';});delay(2000).then(function(){setWeights(window.pyodide.globals.WEIGHTS);setBias(window.pyodide.globals.BIASES);setConsole(function(c){return c+'Trainable parameters randomly initialized\\n';});});}).catch(function(err){return setConsole(function(c){return c+err+'\\n';});});});}else{// update values?\n//setWeights(window.pyodide.globals.WEIGHTS)\n}},[pythonLoaded]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Intro,{}),/*#__PURE__*/_jsx(\"div\",{className:\"python-console\",children:console}),/*#__PURE__*/_jsx(Game,{}),/*#__PURE__*/_jsx(Table,{weights:weights,bias:bias}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ShowTrainingBoards,{title:\"Training Dataset\",boards:train_data}),/*#__PURE__*/_jsx(ShowTrainingBoards,{title:\"Test Dataset\",boards:test_data})]})]});}// ========================================\nexport default App;","map":{"version":3,"sources":["/Users/alexanderackerman/Code/TicTacToeNeuralNet/src/App.tsx"],"names":["React","useState","useEffect","dec","train_data","require","test_data","Intro","Square","i","onClick","dis","setDis","background","toFixed","Board","xNext","setXNext","Array","fill","squares","setSquares","handleClick","sq","Math","random","Game","TrainingSquare","TrainingBoard","board","ShowTrainingBoards","title","boards","map","x","game","class","Table","weights","bias","dataRows","forEach","row","cells","val","j","push","toString","concat","b0","parseFloat","b1","b2","loadNeuralNetScripts","fetch","response","text","mlcode","window","pyodide","runPythonAsync","delay","ms","Promise","resolve","setTimeout","App","console","setConsole","pythonLoaded","setPythonLoaded","setWeights","setBias","languagePluginLoader","then","c","globals","WEIGHTS","BIASES","catch","err"],"mappings":"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","sourcesContent":["import './App.css'\n\nimport React, {useState, useEffect} from 'react'\n\n/* React code below based on https://reactjs.org/tutorial/tutorial.html */\n\nconst dec = 4\nlet train_data = require('./train_data.json');\nlet test_data = require('./test_data.json');\n\n\ndeclare global {\n\n  interface pythonVars {\n    WEIGHTS: number[][]\n    BIASES: string[]\n  }\n\n  interface Pyodide {\n    runPythonAsync: any\n    globals: pythonVars\n  }\n\n  interface Window {\n    languagePluginLoader: any\n    pyodide: Pyodide\n  }\n}\n\nfunction Intro() {\n  return (\n    <div>\n      <h2>Welcome to the Tic Tac Toe Neural Net!</h2>\n        <p>The networks consists of a single fully connected layer with a sigmoid activation function and cross-entropy loss function</p>\n      <p>The goal of this project is to train a simple neural net to classify complete games of Tic Tac Toe as \"X-Wins\", \"O-Wins\", or \"Draw\".</p>\n      <p>To expand the problem space beyond the finite number of possible 3x3 Tic Tac Toe boards, Xs and Os are represented by random values in the range (0, 0.5) and (0.5, 1) respectively.</p>\n  </div>\n  )\n}\n\nfunction Square({i, onClick}: {i: number, onClick: Function}) {\n  const [dis, setDis] = useState(false)\n\n  return (\n    <button className=\"square\" \n      disabled={dis} \n      onClick={() => {onClick(); setDis(true)}}\n      style={i == null ? {background: \"#fff\"} : i > 0.5 ? {background: \"#e4b5b5\"} : {background: \"#99b1f4\"}}\n      >\n      {i ? i.toFixed(dec): i}\n    </button>\n  )\n}\n\nfunction Board() {\n  const [xNext, setXNext] = useState(true)\n  const [squares, setSquares] = useState(Array(9).fill(null))\n\n  function handleClick(i: number){\n    let sq: number[] = squares\n    sq[i] = xNext ? Math.random()/2 : 0.5 + Math.random()/2\n    setSquares(sq)\n    setXNext(!xNext)\n  }\n\n  return (\n    <div className=\"game-board\">\n      <div className=\"status\">{xNext ? \"Next player: X\": \"Next player: O\"}</div>\n      <div className=\"board-row\">\n        <Square i={squares[0]} onClick={() => handleClick(0)}/>\n        <Square i={squares[1]} onClick={() => handleClick(1)}/>\n        <Square i={squares[2]} onClick={() => handleClick(2)}/>\n      </div>\n      <div className=\"board-row\">\n        <Square i={squares[3]} onClick={() => handleClick(3)}/>\n        <Square i={squares[4]} onClick={() => handleClick(4)}/>\n        <Square i={squares[5]} onClick={() => handleClick(5)}/>\n      </div>\n      <div className=\"board-row\">\n        <Square i={squares[6]} onClick={() => handleClick(6)}/>\n        <Square i={squares[7]} onClick={() => handleClick(7)}/>\n        <Square i={squares[8]} onClick={() => handleClick(8)}/>\n      </div>\n    </div>\n  );\n}\n\nfunction Game(){\n  return (\n    <div className=\"game\">\n      <Board /> \n      <div className=\"game-info\">\n        <div>{/* status */}</div>\n        <ol>{/* TODO */}</ol>\n      </div>\n    </div>\n  );\n}\n\nfunction TrainingSquare(i: number) {\n\n  return (\n    <button className=\"training-square\" style={i > 0.5 ? {background: \"#e4b5b5\"} : {background: \"#99b1f4\"}}>\n      {i.toFixed(dec)}\n    </button>\n  );\n}\n\ntype boardArray = [number, number, number, number, number, number, number, number, number]\n\nfunction TrainingBoard(board: boardArray) {\n\n  return (\n    <div className='training-board'>\n      <div className=\"board-row\">\n        {TrainingSquare(board[0])}\n        {TrainingSquare(board[1])}\n        {TrainingSquare(board[2])}\n      </div>\n      <div className=\"board-row\">\n        {TrainingSquare(board[3])}\n        {TrainingSquare(board[4])}\n        {TrainingSquare(board[5])}\n      </div>\n      <div className=\"board-row\">\n        {TrainingSquare(board[6])}\n        {TrainingSquare(board[7])}\n        {TrainingSquare(board[8])}\n      </div>\n    </div>\n  );\n}\n\n\ntype json_board = {game: boardArray, class: number}\n\nfunction ShowTrainingBoards({title, boards}: {title: string, boards: json_board[]}) {\n\n  return (\n    <table className='training-boards'>\n      <thead>\n        <tr><th><h3>{title}</h3></th></tr>\n        <tr>\n        <th id='board'>Input Board</th>\n        <th id='label'>True Class</th>\n        <th id='pred'>Predicted Class</th>\n        </tr>\n      </thead>\n      <tbody>\n        {boards.map((x, i) => <tr key={i}><td headers=\"board\">{TrainingBoard(x.game)}</td><td headers='label'>{x.class}</td><td headers='pred'>None</td></tr>)} \n      </tbody>\n    </table>\n  )\n\n}\n\n\ntype tableProps = {\n  weights: number[][]\n  bias: string[]\n}\n\nfunction Table({weights, bias} : tableProps) {\n  const dec = 4\n  \n  let dataRows: JSX.Element[][] = []\n\n  weights.forEach(\n    (row, i) => {\n      let cells: JSX.Element[] = []\n      row.forEach((val, j) => {\n        cells.push(\n          <td headers='weights' key={i.toString().concat(j.toString())}>{val.toFixed(dec)}</td>\n        )\n      })\n      dataRows.push(cells)\n\n    }\n  )\n  let b0: string = bias[0] == null ? \"\" : parseFloat(bias[0]).toFixed(dec)\n  let b1: string = bias[1] == null ? \"\" : parseFloat(bias[1]).toFixed(dec)\n  let b2: string = bias[2] == null ? \"\" : parseFloat(bias[2]).toFixed(dec)\n\n  return (\n      <div>\n      <table className='params-table'>\n        <thead>\n          <tr>\n            <th id='bias'></th><th id='bias'>Bias</th><th id='weights'>Weights</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr key=\"0r\"><th key=\"0h\">Class X Wins</th><td headers='bias' key=\"0b\">{b0}</td>{dataRows[0]}</tr>\n          <tr key=\"1r\"><th key=\"1h\">Class Y Wins</th><td headers='bias' key='1b'>{b1}</td>{dataRows[1]}</tr>\n          <tr key=\"2r\"><th key=\"2h\">Class Draw</th><td headers='bias' key='2b'>{b2}</td>{dataRows[2]}</tr>\n        </tbody>\n      </table>\n    </div>\n    )\n}\n\nasync function loadNeuralNetScripts()  {\n  let response = await fetch('./NeuralNet.py')\n  let mlcode = await response.text()\n  window.pyodide.runPythonAsync(mlcode)\n}\n\nasync function delay(ms: number) {\n  await new Promise<void>(resolve => setTimeout( () => resolve(), ms));\n}\n\nfunction App() {\n  const [console, setConsole] = useState('Initializing Python 3.8\\n')\n  const [pythonLoaded, setPythonLoaded] = useState(false)\n  const [weights, setWeights] = useState([[],[],[]] as number[][])\n  const [bias, setBias] = useState([] as string[])\n\n\n\n  //Initialize Python\n  useEffect(() => {\n      if(!pythonLoaded){\n        window.languagePluginLoader.then(() => {\n          setPythonLoaded(true)\n          setConsole(c => c + 'Python Loaded\\n')\n\n          //load NeuralNet.py Scripts\n          loadNeuralNetScripts().then(() => {\n            setConsole(c => c + 'Neural Net Scripts Loaded\\n')\n            delay(2000).then(() => {\n              setWeights(window.pyodide.globals.WEIGHTS)\n              setBias(window.pyodide.globals.BIASES)\n              setConsole(c => c + 'Trainable parameters randomly initialized\\n')\n          })\n          }).catch((err: Error) => setConsole(c => c + err + '\\n'))\n        })\n      }  else {\n        // update values?\n        //setWeights(window.pyodide.globals.WEIGHTS)\n      }\n    }, [pythonLoaded])\n\n\n  return (\n    <div className=\"App\">\n      <Intro />     \n      <div className='python-console'>{console}</div>\n      <Game />\n      <Table weights={weights} bias={bias}/>\n      <div>\n        <ShowTrainingBoards title={\"Training Dataset\"} boards={train_data}/>\n        <ShowTrainingBoards title={\"Test Dataset\"} boards={test_data}/>\n      </div>\n    </div>\n  \n  )\n}\n\n\n// ========================================\n\nexport default App;"]},"metadata":{},"sourceType":"module"}