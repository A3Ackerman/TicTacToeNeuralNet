{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alexanderackerman/Code/TicTacToeNeuralNet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from'react';/* React code below based on https://reactjs.org/tutorial/tutorial.html */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dec=4;var gameStatus={XWIN:\"X Wins!\",OWIN:\"O Wins!\",DRAW:\"Draw!\",XN:\"Next Player: X\",ON:\"Next Player: 0\"};function Intro(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to the Tic Tac Toe Neural Net!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The networks consists of a single fully connected layer with values normalized by a stable softmax activation function and a cross-entropy loss function.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The goal of this project is to train a simple neural net to classify complete games of Tic Tac Toe as \\\"X-Wins\\\", \\\"O-Wins\\\", or \\\"Draw\\\", under the convention that X always plays first.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"To expand the problem space beyond the finite number of possible 3x3 Tic Tac Toe boards, Xs and Os are represented by random values in the range \",/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:\"#99b1f4\"},children:\"(-1, 0)\"}),\" and \",/*#__PURE__*/_jsx(\"span\",{style:{backgroundColor:\"#e4b5b5\"},children:\"(0, 1)\"}),\" respectively.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"WARNING: this webapp does not support Safari! Has been tested with both Chrome and Firefox\"})]});}function getGameStatus(squares){var lines=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(var i=0;i<lines.length;i++){var _lines$i=_slicedToArray(lines[i],3),a=_lines$i[0],b=_lines$i[1],c=_lines$i[2];if(!squares[a]||!squares[b]||!squares[c]){continue;// skip loop if any of the cells in the line are empty\n}if(squares[a]<0.5&&squares[b]<0.5&&squares[c]<0.5){return gameStatus.XWIN;// Class X wins\n}else if(squares[a]>=0.5&&squares[b]>=0.5&&squares[c]>=0.5){return gameStatus.OWIN;// Class Y wins\n}}if(squares.includes(null)){if(squares.filter(function(v){return v===null;}).length%2){return gameStatus.XN;}else{return gameStatus.ON;}}else{return gameStatus.DRAW;// Class Draw\n}}function Square(props){return/*#__PURE__*/_jsx(\"button\",{className:\"square\",disabled:props.i!==null||props.disabled,onClick:props.onClick,style:props.i===0?{background:\"#fff\"}:props.i>0?{background:\"#e4b5b5\"}:{background:\"#99b1f4\"},children:props.i?props.i.toFixed(dec):props.i});}function Board(props){var _useState=useState(Array(9).fill(null)),_useState2=_slicedToArray(_useState,2),squares=_useState2[0],setSquares=_useState2[1];var _useState3=useState(gameStatus.XN),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];function handleClick(i){var sq=squares.slice();sq[i]=status===gameStatus.XN?Math.random()/2:0.5+Math.random()/2;var st=getGameStatus(sq);// update state, but won't take effect until after render\nsetSquares(sq);setStatus(st);}function saveAndReset(){props.saveBoard(squares);setSquares(Array(9).fill(null));setStatus(gameStatus.XN);}return/*#__PURE__*/_jsxs(\"div\",{className:\"game\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-board\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status\",children:status}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[0],onClick:function onClick(){return handleClick(0);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[1],onClick:function onClick(){return handleClick(1);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[2],onClick:function onClick(){return handleClick(2);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[3],onClick:function onClick(){return handleClick(3);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[4],onClick:function onClick(){return handleClick(4);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[5],onClick:function onClick(){return handleClick(5);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:squares[6],onClick:function onClick(){return handleClick(6);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[7],onClick:function onClick(){return handleClick(7);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)}),/*#__PURE__*/_jsx(Square,{i:squares[8],onClick:function onClick(){return handleClick(8);},disabled:!(status===gameStatus.XN||status===gameStatus.ON)})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return saveAndReset();},disabled:status===gameStatus.XN||status===gameStatus.ON,children:\"Add game to Test Dataset\"})]});}function TrainingBoard(board){return/*#__PURE__*/_jsxs(\"div\",{className:\"training-board\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:board[0]}),/*#__PURE__*/_jsx(Square,{i:board[1]}),/*#__PURE__*/_jsx(Square,{i:board[2]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:board[3]}),/*#__PURE__*/_jsx(Square,{i:board[4]}),/*#__PURE__*/_jsx(Square,{i:board[5]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board-row\",children:[/*#__PURE__*/_jsx(Square,{i:board[6]}),/*#__PURE__*/_jsx(Square,{i:board[7]}),/*#__PURE__*/_jsx(Square,{i:board[8]})]})]});}function ShowTrainingGames(_ref){var title=_ref.title,error=_ref.error,games=_ref.games;return/*#__PURE__*/_jsxs(\"table\",{className:\"training-boards\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"h3\",{children:title})}),/*#__PURE__*/_jsx(\"th\",{children:\"Accuracy\"}),/*#__PURE__*/_jsx(\"th\",{children:error.toFixed(dec)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{id:\"board\",children:\"Input Board\"}),/*#__PURE__*/_jsx(\"th\",{id:\"label\",children:\"True Class\"}),/*#__PURE__*/_jsx(\"th\",{id:\"pred\",children:\"Predicted Class\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:games.map(function(g,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{headers:\"board\",children:TrainingBoard(g.game)}),/*#__PURE__*/_jsx(\"td\",{headers:\"label\",children:g.label}),/*#__PURE__*/_jsx(\"td\",{headers:\"pred\",children:g.predicted_class})]},i);})})]});}function Table(props){var weights=props.weights;var bias=props.bias;var dataRows=[];weights.forEach(function(row,i){var cells=[];row.forEach(function(val,j){cells.push(/*#__PURE__*/_jsx(\"td\",{headers:\"weights\",children:val.toFixed(dec)},i.toString().concat(j.toString())));});dataRows.push(cells);});var b0=bias[0]==null?\"\":bias[0].toFixed(dec);var b1=bias[1]==null?\"\":bias[1].toFixed(dec);var b2=bias[2]==null?\"\":bias[2].toFixed(dec);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"params-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{id:\"bias\"}),/*#__PURE__*/_jsx(\"th\",{id:\"bias\",children:\"Bias\"}),/*#__PURE__*/_jsx(\"th\",{id:\"weights\",children:\"Weights\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class 0 (X Wins)\"},\"0h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b0},\"0b\"),dataRows[0]]},\"0r\"),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class 1 (Draw)\"},\"1h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b1},'1b'),dataRows[1]]},\"1r\"),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Class 2 (O Wins)\"},\"2h\"),/*#__PURE__*/_jsx(\"td\",{headers:\"bias\",children:b2},'2b'),dataRows[2]]},\"2r\")]})]})});}function RunPythonWithParam(props){var _useState5=useState(props.default),_useState6=_slicedToArray(_useState5,2),N=_useState6[0],SetN=_useState6[1];var handleSubmit=function handleSubmit(e){props.onSubmit(props.pythonCall+\"(\"+N+\")\");e.preventDefault();};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:props.label}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"trainN\",name:\"trainN\",min:\"1\",max:\"100\",onChange:function onChange(e){return SetN(e.target.value);},value:N}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:props.buttonText})]});}function loadNeuralNetScripts(){return _loadNeuralNetScripts.apply(this,arguments);}function _loadNeuralNetScripts(){_loadNeuralNetScripts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,mlcode;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('./NeuralNet.py');case 2:response=_context.sent;_context.next=5;return response.text();case 5:mlcode=_context.sent;window.pyodide.runPythonAsync(mlcode);case 7:case\"end\":return _context.stop();}}},_callee);}));return _loadNeuralNetScripts.apply(this,arguments);}function delay(_x){return _delay.apply(this,arguments);}function _delay(){_delay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ms){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return new Promise(function(resolve){return setTimeout(function(){return resolve();},ms);});case 2:if(!(window.pyodide.globals.DATA===undefined)){_context2.next=5;break;}_context2.next=5;return delay(ms);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _delay.apply(this,arguments);}function App(){var _useState7=useState('Initializing Python 3.8\\n'),_useState8=_slicedToArray(_useState7,2),console=_useState8[0],setConsole=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),pythonLoaded=_useState10[0],setPythonLoaded=_useState10[1];var _useState11=useState({WEIGHTS:[],BIASES:[],TRAINING_DATA:[],TEST_DATA:[],TRAINING_ERROR:1,TEST_ERROR:1}),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];//Initialize Python\nuseEffect(function(){if(!pythonLoaded){window.languagePluginLoader.then(function(){setPythonLoaded(true);setConsole(function(c){return c+'Python Loaded\\n';});//load NeuralNet.py Scripts\nloadNeuralNetScripts().then(function(){setConsole(function(c){return c+'Neural Net Scripts Loaded\\n';});delay(100).then(function(){setData(window.pyodide.globals.DATA);setConsole(function(c){return c+'Trainable parameters randomly initialized\\n';});});}).catch(function(err){return setConsole(function(c){return c+err+'\\n';});});});}else{// update values?\n//setWeights(window.pyodide.globals.WEIGHTS)\n}},[pythonLoaded]);function callPython(code){window.pyodide.runPythonAsync(code).then(function(output){setData(window.pyodide.globals.DATA);setConsole(console+output+'\\n');}).catch(function(err){setConsole(console+err+'\\n');});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Intro,{}),/*#__PURE__*/_jsx(\"div\",{className:\"python-console\",children:console}),/*#__PURE__*/_jsx(RunPythonWithParam,{label:\"Step 1:\",buttonText:\"Generate N Training Games\",default:\"50\",pythonCall:\"generate_n_training_games\",onSubmit:function onSubmit(e){return callPython(e);}}),/*#__PURE__*/_jsx(RunPythonWithParam,{label:\"Step 2:\",buttonText:\"Generate N Test Games\",default:\"20\",pythonCall:\"generate_n_test_games\",onSubmit:function onSubmit(e){return callPython(e);}}),/*#__PURE__*/_jsx(RunPythonWithParam,{label:\"Step 3:\",buttonText:\"Train for N Epochs\",default:\"10\",pythonCall:\"train\",onSubmit:function onSubmit(e){return callPython(e);}}),/*#__PURE__*/_jsx(Table,{weights:data.WEIGHTS,bias:data.BIASES}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ShowTrainingGames,{title:\"Training Dataset\",error:data.TRAINING_ERROR,games:data.TRAINING_DATA}),/*#__PURE__*/_jsx(ShowTrainingGames,{title:\"Test Dataset\",error:data.TEST_ERROR,games:data.TEST_DATA})]})]});}// ========================================\nexport default App;","map":{"version":3,"sources":["/Users/alexanderackerman/Code/TicTacToeNeuralNet/src/App.tsx"],"names":["React","useState","useEffect","dec","gameStatus","XWIN","OWIN","DRAW","XN","ON","Intro","backgroundColor","getGameStatus","squares","lines","i","length","a","b","c","includes","filter","v","Square","props","disabled","onClick","background","toFixed","Board","Array","fill","setSquares","status","setStatus","handleClick","sq","slice","Math","random","st","saveAndReset","saveBoard","TrainingBoard","board","ShowTrainingGames","title","error","games","map","g","game","label","predicted_class","Table","weights","bias","dataRows","forEach","row","cells","val","j","push","toString","concat","b0","b1","b2","RunPythonWithParam","default","N","SetN","handleSubmit","e","onSubmit","pythonCall","preventDefault","target","value","buttonText","loadNeuralNetScripts","fetch","response","text","mlcode","window","pyodide","runPythonAsync","delay","ms","Promise","resolve","setTimeout","globals","DATA","undefined","App","console","setConsole","pythonLoaded","setPythonLoaded","WEIGHTS","BIASES","TRAINING_DATA","TEST_DATA","TRAINING_ERROR","TEST_ERROR","data","setData","languagePluginLoader","then","catch","err","callPython","code","output"],"mappings":"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","sourcesContent":["import './App.css'\n\nimport React, {useState, useEffect} from 'react'\n\n/* React code below based on https://reactjs.org/tutorial/tutorial.html */\n\nconst dec = 4\n\ntype boardVal = number | null\ntype boardArray = [boardVal, boardVal, boardVal, boardVal, boardVal, boardVal, boardVal, boardVal, boardVal]\n\ndeclare global {\n\n  interface game {\n    game: boardArray\n    label: number\n    predicted_class: number\n  }\n\n  interface pythonVars {\n    DATA: {\n      WEIGHTS: number[][]\n      BIASES: number[]\n      TRAINING_DATA: game[]\n      TEST_DATA: game[]\n      TRAINING_ERROR: number\n      TEST_ERROR: number\n    }\n  }\n\n  interface Pyodide {\n    runPythonAsync: any\n    globals: pythonVars\n  }\n\n  interface Window {\n    languagePluginLoader: any\n    pyodide: Pyodide\n  }\n}\n\n\nconst gameStatus = {\n  XWIN: \"X Wins!\",\n  OWIN: \"O Wins!\",\n  DRAW: \"Draw!\",\n  XN: \"Next Player: X\",\n  ON: \"Next Player: 0\"\n}\n\nfunction Intro() {\n  return (\n    <div>\n      <h2>Welcome to the Tic Tac Toe Neural Net!</h2>\n        <p>The networks consists of a single fully connected layer with values normalized by a stable softmax activation function and a cross-entropy loss function.</p>\n      <p>The goal of this project is to train a simple neural net to classify complete games of Tic Tac Toe as \"X-Wins\", \"O-Wins\", or \"Draw\", under the convention that X always plays first.</p>\n      <p>To expand the problem space beyond the finite number of possible 3x3 Tic Tac Toe boards, Xs and Os are represented by random values in the range <span style={{backgroundColor: \"#99b1f4\"}}>(-1, 0)</span> and <span style={{backgroundColor:  \"#e4b5b5\"}}>(0, 1)</span> respectively.</p>\n      <p>WARNING: this webapp does not support Safari! Has been tested with both Chrome and Firefox</p>\n  </div>\n  )\n}\n\nfunction getGameStatus(squares: boardArray) {\n  const lines = [\n    [0, 1, 2],\n    [3, 4, 5],\n    [6, 7, 8],\n    [0, 3, 6],\n    [1, 4, 7],\n    [2, 5, 8],\n    [0, 4, 8],\n    [2, 4, 6],\n  ];\n  for (let i = 0; i < lines.length; i++) {\n    const [a, b, c] = lines[i];\n\n    if(!squares[a] || !squares[b] || !squares[c]){\n      continue  // skip loop if any of the cells in the line are empty\n    }\n\n    if (squares[a] < 0.5 && squares[b] < 0.5 && squares[c] < 0.5){\n      return gameStatus.XWIN // Class X wins\n    } else if (squares[a] >= 0.5 && squares[b] >= 0.5 && squares[c] >= 0.5) {\n      return gameStatus.OWIN; // Class Y wins\n    }\n  }\n  if(squares.includes(null)){\n    if(squares.filter(v => v === null).length % 2){\n      return gameStatus.XN\n    } else {\n      return gameStatus.ON\n    }\n  } else {\n    return gameStatus.DRAW // Class Draw\n  }\n}\n\nfunction Square(props: any) {\n\n  return (\n    <button className=\"square\" \n      disabled={props.i !== null || props.disabled} \n      onClick={props.onClick}\n      style={props.i === 0 ? {background: \"#fff\"} : props.i > 0 ? {background: \"#e4b5b5\"} : {background: \"#99b1f4\"}}\n      >\n      {props.i ? props.i.toFixed(dec): props.i}\n    </button>\n  )\n}\n\nfunction Board(props: any) {\n\n  const [squares, setSquares] = useState(Array(9).fill(null) as boardArray)\n  const [status, setStatus] = useState(gameStatus.XN)\n\n  function handleClick(i: number){\n    let sq: boardArray = squares.slice() as boardArray\n    sq[i] = status === gameStatus.XN ? Math.random()/2 : 0.5 + Math.random()/2\n    let st = getGameStatus(sq)\n    // update state, but won't take effect until after render\n    setSquares(sq)\n    setStatus(st)\n  }\n\n  function saveAndReset(){\n    props.saveBoard(squares)\n    setSquares(Array(9).fill(null) as boardArray)\n    setStatus(gameStatus.XN)\n  }\n\n  return (\n    <div className=\"game\">\n      <div className=\"game-board\">\n        <div className=\"status\">{status}</div>\n        <div className=\"board-row\">\n          <Square i={squares[0]} onClick={() => handleClick(0)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[1]} onClick={() => handleClick(1)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[2]} onClick={() => handleClick(2)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n        </div>\n        <div className=\"board-row\">\n          <Square i={squares[3]} onClick={() => handleClick(3)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[4]} onClick={() => handleClick(4)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[5]} onClick={() => handleClick(5)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n        </div>\n        <div className=\"board-row\">\n          <Square i={squares[6]} onClick={() => handleClick(6)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[7]} onClick={() => handleClick(7)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n          <Square i={squares[8]} onClick={() => handleClick(8)} disabled={!(status === gameStatus.XN || status === gameStatus.ON)}/>\n        </div>\n      </div>\n      <button onClick={() => saveAndReset()} disabled={status === gameStatus.XN || status === gameStatus.ON}>Add game to Test Dataset</button>\n    </div>\n  );\n}\n\n\nfunction TrainingBoard(board: boardArray) {\n\n  return (\n    <div className='training-board'>\n      <div className=\"board-row\">\n        <Square i={board[0]}/>\n        <Square i={board[1]}/>\n        <Square i={board[2]}/>\n      </div>\n      <div className=\"board-row\">\n        <Square i={board[3]}/>\n        <Square i={board[4]}/>\n        <Square i={board[5]}/>\n      </div>\n      <div className=\"board-row\">\n        <Square i={board[6]}/>\n        <Square i={board[7]}/>\n        <Square i={board[8]}/>\n      </div>\n    </div>\n  );\n}\n\n\nfunction ShowTrainingGames({title, error, games}: {title: string, error: number, games: game[]}) {\n\n  return (\n    <table className='training-boards'>\n      <thead>\n        <tr><th><h3>{title}</h3></th><th>Accuracy</th><th>{error.toFixed(dec)}</th></tr>\n        <tr>\n        <th id='board'>Input Board</th>\n        <th id='label'>True Class</th>\n        <th id='pred'>Predicted Class</th>\n        </tr>\n      </thead>\n      <tbody>\n        {games.map((g, i) => <tr key={i}><td headers=\"board\">{TrainingBoard(g.game)}</td><td headers='label'>{g.label}</td><td headers='pred'>{g.predicted_class}</td></tr>)} \n      </tbody>\n    </table>\n  )\n\n}\n\n\ntype tableProps = {\n  weights: number[][]\n  bias: number[]\n}\n\nfunction Table(props: any) {\n  let weights = props.weights\n  let bias = props.bias\n  \n  let dataRows: JSX.Element[][] = []\n\n  weights.forEach(\n    (row: number[], i: number) => {\n      let cells: JSX.Element[] = []\n      row.forEach((val: number, j: number) => {\n        cells.push(\n          <td headers='weights' key={i.toString().concat(j.toString())}>{val.toFixed(dec)}</td>\n        )\n      })\n      dataRows.push(cells)\n\n    }\n  )\n  let b0: string = bias[0] == null ? \"\" : bias[0].toFixed(dec)\n  let b1: string = bias[1] == null ? \"\" : bias[1].toFixed(dec)\n  let b2: string = bias[2] == null ? \"\" : bias[2].toFixed(dec)\n\n  return (\n      <div>\n      <table className='params-table'>\n        <thead>\n          <tr>\n            <th id='bias'></th><th id='bias'>Bias</th><th id='weights'>Weights</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr key=\"0r\"><th key=\"0h\">Class 0 (X Wins)</th><td headers='bias' key=\"0b\">{b0}</td>{dataRows[0]}</tr>\n          <tr key=\"1r\"><th key=\"1h\">Class 1 (Draw)</th><td headers='bias' key='1b'>{b1}</td>{dataRows[1]}</tr>\n          <tr key=\"2r\"><th key=\"2h\">Class 2 (O Wins)</th><td headers='bias' key='2b'>{b2}</td>{dataRows[2]}</tr>\n        </tbody>\n      </table>\n    </div>\n    )\n}\n\nfunction RunPythonWithParam(props: any){\n  const [N, SetN] = useState(props.default)\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    props.onSubmit(props.pythonCall + \"(\" + N + \")\")\n    e.preventDefault()\n  }\n\n  return(\n  <form onSubmit={e => handleSubmit(e)}>\n    <label htmlFor=\"quantity\">{props.label}</label>\n    <input type=\"text\" id=\"trainN\" name=\"trainN\" min=\"1\" max=\"100\" onChange={e => SetN(e.target.value)} value={N}/>\n    <input type=\"submit\" value={props.buttonText}/>\n  </form>\n  )\n}\n\nasync function loadNeuralNetScripts()  {\n  let response = await fetch('./NeuralNet.py')\n  let mlcode = await response.text()\n  window.pyodide.runPythonAsync(mlcode)\n}\n\nasync function delay(ms: number) {\n  await new Promise<void>(resolve => setTimeout( () => resolve(), ms));\n  if(window.pyodide.globals.DATA === undefined){\n    await delay(ms);\n  }\n}\n\nfunction App() {\n  const [console, setConsole] = useState('Initializing Python 3.8\\n')\n  const [pythonLoaded, setPythonLoaded] = useState(false)\n  const [data, setData] = useState({\n      WEIGHTS: [] as number[][],\n      BIASES: [] as number[],\n      TRAINING_DATA: [] as game[],\n      TEST_DATA: [] as game[],\n      TRAINING_ERROR: 1 as number,\n      TEST_ERROR: 1 as number\n    } as pythonVars['DATA'])\n\n  //Initialize Python\n  useEffect(() => {\n      if(!pythonLoaded){\n        window.languagePluginLoader.then(() => {\n          setPythonLoaded(true)\n          setConsole(c => c + 'Python Loaded\\n')\n\n          //load NeuralNet.py Scripts\n          loadNeuralNetScripts().then(() => {\n            setConsole(c => c + 'Neural Net Scripts Loaded\\n')\n            delay(100).then(() => {\n              setData(window.pyodide.globals.DATA)\n              setConsole(c => c + 'Trainable parameters randomly initialized\\n')\n          })\n          }).catch((err: Error) => setConsole(c => c + err + '\\n'))\n        })\n      }  else {\n        // update values?\n        //setWeights(window.pyodide.globals.WEIGHTS)\n      }\n    }, [pythonLoaded])\n\n    function callPython(code: string){\n      window.pyodide.runPythonAsync(code)\n        .then((output: string)=> {\n          setData(window.pyodide.globals.DATA)\n          setConsole(console + output + '\\n')\n        })\n        .catch((err: string) => {\n            setConsole(console + err + '\\n')\n        });\n    }\n\n  return (\n    <div className=\"App\">\n      <Intro />     \n      <div className='python-console'>{console}</div>\n      <RunPythonWithParam label=\"Step 1:\" buttonText=\"Generate N Training Games\" default=\"50\" pythonCall=\"generate_n_training_games\" onSubmit={(e: string) => callPython(e)}/>\n      <RunPythonWithParam label=\"Step 2:\" buttonText=\"Generate N Test Games\" default=\"20\" pythonCall=\"generate_n_test_games\" onSubmit={(e: string) => callPython(e)}/>\n      <RunPythonWithParam label=\"Step 3:\" buttonText=\"Train for N Epochs\" default=\"10\" pythonCall=\"train\" onSubmit={(e: string) => callPython(e)}/>\n      {/* <Board saveBoard={(b: boardArray) => saveBoard(b)}/> */}\n      <Table weights={data.WEIGHTS} bias={data.BIASES}/>\n      <div>\n        <ShowTrainingGames title={\"Training Dataset\"} error={data.TRAINING_ERROR} games={data.TRAINING_DATA}/>\n        <ShowTrainingGames title={\"Test Dataset\"} error={data.TEST_ERROR} games={data.TEST_DATA}/>\n      </div>\n    </div>\n  \n  )\n}\n\n\n// ========================================\n\nexport default App;"]},"metadata":{},"sourceType":"module"}